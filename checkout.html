<!DOCTYPE html>
<html>
  <head>
    <title>Checkout</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" media="screen" type="text/css" />
    <script
      type="text/javascript"
      src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"
    ></script>
  </head>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
    }

    #site {
      max-width: 800px;
      margin: 20px auto;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }

    #masthead {
      text-align: center;
      margin-bottom: 20px;
    }

    #masthead h1 {
      font-size: 28px;
      color: #333;
    }

    #content {
      margin-bottom: 20px;
    }

    #checkout-cart {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    #checkout-cart th,
    #checkout-cart td {
      padding: 10px;
      text-align: left;
    }

    #checkout-cart th {
      background-color: #f0f0f0;
      color: #333;
    }

    #checkout-cart td {
      border-bottom: 1px solid #eee;
    }

    #pricing {
      margin-top: 20px;
    }

    #pricing p {
      margin-bottom: 10px;
    }

    #pricing strong {
      font-weight: bold;
    }

    #checkout-order-form {
      margin-top: 20px;
    }

    #checkout-order-form h2 {
      font-size: 24px;
      margin-bottom: 20px;
    }

    #fieldset-billing,
    #fieldset-shipping {
      margin-bottom: 20px;
    }

    #fieldset-billing legend,
    #fieldset-shipping legend {
      font-size: 20px;
      margin-bottom: 10px;
    }

    #fieldset-billing div,
    #fieldset-shipping div {
      margin-bottom: 10px;
    }

    #fieldset-billing label,
    #fieldset-shipping label {
      display: inline-block;
      width: 150px;
      text-align: right;
      margin-right: 10px;
    }

    #fieldset-billing input,
    #fieldset-shipping input {
      width: 200px;
    }

    #fieldset-billing select,
    #fieldset-shipping select {
      width: 200px;
    }

    #submit-order {
      display: block;
      margin-top: 20px;
    }

    footer {
      text-align: center;
      margin-top: 20px;
      color: #888;
    }

    footer a {
      color: #888;
      text-decoration: none;
    }

    footer a:hover {
      color: #555;
    }
  </style>
  <body id="checkout-page">
    <div id="site">
      <header id="masthead">
        <h1></h1>
      </header>
      <div id="content">
        <h1>Checkout</h1>
        <table id="checkout-cart" class="shopping-cart">
          <thead>
            <tr>
              <th scope="col">Item</th>
              <th scope="col">Qty</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        <div id="pricing">
          <p id="shipping">
            <strong>Shipping</strong>: <span id="sshipping"></span>
          </p>

          <p id="sub-total">
            <strong>Total</strong>: <span id="stotal"></span>
          </p>
        </div>

        <form action="order.html" method="post" id="checkout-order-form">
          <h2>Your Details</h2>

          <fieldset id="fieldset-billing">
            <legend>Billing</legend>
            <div>
              <label for="name">Name</label>
              <input
                type="text"
                name="name"
                id="name"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="email">Email</label>
              <input
                type="text"
                name="email"
                id="email"
                data-type="expression"
                data-message="Not a valid email address"
              />
            </div>
            <div>
              <label for="city">City</label>
              <input
                type="text"
                name="city"
                id="city"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="address">Address</label>
              <input
                type="text"
                name="address"
                id="address"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="zip">ZIP Code</label>
              <input
                type="text"
                name="zip"
                id="zip"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="country">Country</label>
              <select
                name="country"
                id="country"
                data-type="string"
                data-message="This field cannot be empty"
              >
                <option value="">Select</option>
                <option value="IN">India</option>
              </select>
            </div>
          </fieldset>

          <div id="shipping-same">
            Same as Billing
            <input type="checkbox" id="same-as-billing" value="" checked />
          </div>

          <fieldset id="fieldset-shipping" style="display: none">
            <legend>Shipping</legend>

            <div>
              <label for="sname">Name</label>
              <input
                type="text"
                name="sname"
                id="sname"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="semail">Email</label>
              <input
                type="text"
                name="semail"
                id="semail"
                data-type="expression"
                data-message="Not a valid email address"
              />
            </div>
            <div>
              <label for="scity">City</label>
              <input
                type="text"
                name="scity"
                id="scity"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="saddress">Address</label>
              <input
                type="text"
                name="saddress"
                id="saddress"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="szip">ZIP Code</label>
              <input
                type="text"
                name="szip"
                id="szip"
                data-type="string"
                data-message="This field cannot be empty"
              />
            </div>
            <div>
              <label for="scountry">Country</label>
              <select
                name="scountry"
                id="scountry"
                data-type="string"
                data-message="This field cannot be empty"
              >
                <option value="">Select</option>
                <option value="IN">India</option>
              </select>
            </div>
          </fieldset>

          <p>
            <input type="submit" id="submit-order" value="Submit" class="btn" />
          </p>
        </form>
      </div>
    </div>
  </body>

  <script>
  const btn = document.querySelector('#submit-order');
   var product = JSON.parse(localStorage.getItem("product"));
        let totalSum =0;
      // Create a new table row
      console.log(product)
      product.forEach((product)=>{

   
      var tr = document.createElement("tr");

      // Create the table data cellsyy
      var tdName = document.createElement("td");
      tdName.textContent = product.productName;
      var tdQty = document.createElement("td");
      tdQty.textContent = product.quantity;
      var tdPrice = document.createElement("td");
      tdPrice.textContent = product.productPrice;
      var tdTotal = document.createElement("td");
      tdTotal.textContent = product.qty * product.price;

      // Append the table data cells to the table row
      tr.appendChild(tdName);
      tr.appendChild(tdQty);
      tr.appendChild(tdPrice);
      document.querySelector(".shopping-cart tbody").appendChild(tr);
         const qty = parseInt(tdQty.textContent, 10);
         const price = parseFloat(tdPrice.textContent);
         totalSum += qty * price;
         })

      const stotal = document.querySelector("#stotal");
      
      stotal.textContent = totalSum;
  btn.addEventListener('click' , (e)=>{
    var form = document.querySelector('#checkout-order-form');
    var fieldset = form.querySelector('#fieldset-billing');
    var inputs = fieldset.querySelectorAll('input, select');
    var data = {};
    inputs.forEach(input => {
      data[input.name] = input.value;
    });
    console.log(data);
    localStorage.setItem('buyerInfo',JSON.stringify(data));
  })
  </script>
</html>
